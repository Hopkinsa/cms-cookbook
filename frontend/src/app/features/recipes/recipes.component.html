<div class="row">
  <h1>Recipes</h1>
  @if (signalService.editEnabled()) {
    <a matButton="tonal" routerLink="/recipe/add">Add</a>
  }
</div>
<div class="row search-bar">
  <form (submit)="search($event)">
    <label><b>Search:</b><input type="text" [field]="searchForm"></label><button type="button" matIconButton (click)="search($event)"><mat-icon>search</mat-icon></button>
  </form><button type="button" matIconButton (click)="reset()"><mat-icon>close_small</mat-icon></button>
</div>
<div class="row">
  @if (signalService.recipeList()) {
    <div class="column">
      @for (recipe of signalService.recipeList() | filterArray:'':''; track recipe.id) {
        <div class="recipe">
          <a [routerLink]="['/recipe', recipe.id]">
            @if (recipe.img_url !== '') {
              <div class="recipe-img" style="background-image: url('http://localhost:3000/image/{{recipe.img_url}}')"></div>
            }
            @else {
              <div class="recipe-img recipe-img-blank"></div>
            }
          </a>
          @if (signalService.editEnabled()) {
            <div class="recipe-amend">
              <button type="button" matIconButton (click)="amend(recipe.id)"><mat-icon>edit</mat-icon></button>
              <button type="button" matIconButton (click)="delete(recipe.id)"><mat-icon>delete</mat-icon></button>
            </div>
          }
          <div class="recipe-name"><a [routerLink]="['/recipe', recipe.id]">{{ recipe.title }}</a></div>

        </div>
      }
  </div>
  }
  @else {
    <p>No recipes found</p>
  }
</div>
<div class="row">
  <button type="button" matButton="filled" (click)="back()">Back</button>
</div>